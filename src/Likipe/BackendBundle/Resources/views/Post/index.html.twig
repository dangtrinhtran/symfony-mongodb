{% extends "LikipeBackendBundle::layout.html.twig" %}
{% block title "Post" %}
{% block content %}
<div class="container">
{% for flashMessage in app.session.flashbag.get('post_success') %}
	<div class="alert alert-success">
		<button title="Close" class="close" data-dismiss="alert" type="button">×</button>
	{{ flashMessage }}
	</div>
{% endfor %}
{% for flashMessage in app.session.flashbag.get('comment_success') %}
	<div class="alert alert-success">
		<button title="Close" class="close" data-dismiss="alert" type="button">×</button>
	{{ flashMessage }}
	</div>
{% endfor %}		
	<div class="row-fluid blog">		
		<h2 style="padding-bottom: 20px;">List posts!</h2>
		<table class="list-posts table table-striped table-bordered">
			<thead>
				<tr>
					<th>STT</th>
					<th>Id post</th>
					<th>Title post</th>
					<th>Slug post</th>
					<th>Featured image</th>
					<th>Status</th>
					<th>Created post</th>
					<th>Updated post</th>
					<th>Author post</th>
					<th>Blog</th>
					<th>Action</th>
				</tr>
			</thead>
			<tbody>
				
			{% for oPost in aPosts %}
			<tr style="border-bottom: 1px solid rgba(0, 0, 0, 0.15); padding-bottom: 15px;">
				
				<td>{{ loop.index }}</td>
				<td>{{ oPost.id }}</td>
				<th>{{ oPost.title }}</th>
				<th>{{ oPost.slug }}</th>
				<th>
					{% if oPost.featuredimage is not empty %}
					<img src="{{ asset(oPost.featuredimage) }}" class="img-polaroid">
					{% endif %}
				</th>
				<th>
					{% if oPost.isStatus == false %}
						<span class="label label-post label-warning">Disable</span>
					{% else %}
						<span class="label label-post label-success">Enable</span>
					{% endif %}	
				</th>
				{% set oDateCreate =  oPost.created %}
				<td>{{ formatDateTime(oDateCreate) }}</td>
				{% set oDateUpdate =  oPost.updated %}
				<td>{{ formatDateTime(oDateUpdate) }}</td>
				<td>{{ oPost.author }}</td>
				{% if oPost.blog is empty %}
				<td></td>
				{% else %}
				<td>{{ oPost.blog.title }}</td>
				{% endif %}
				<td>
					<a class="btn btn-edit btn-success" href="{{ path('LikipeBackendBundle_Post_edit', {'iPostId': oPost.id}) }}">{% trans %}Edit post{% endtrans %}</a>
					<br><br>
					{% if is_granted('ROLE_ADMIN') %}
						<a class="btn btn-delete btn-danger" href="{{ path('LikipeBackendBundle_Post_delete', {'iPostId': oPost.id}) }}" onclick="return confirm('{% trans %}Are you sure you want to delete this post ?{% endtrans %}');">{% trans %}Delete post{% endtrans %}</a>
					{% endif %}
					<br><br>
					<a class="btn-list-comment btn btn-primary" href="{{ path('LikipeBackendBundle_Comment_index', {'iPostId': oPost.id}) }}">{% trans %}List comments{% endtrans %}</a>
					<br><br>
					<a class="btn-add-comment btn btn-inverse" href="{{ path('LikipeBackendBundle_Comment_add', {'iPostId': oPost.id}) }}">{% trans %}Add comment{% endtrans %}</a>
				</td>
				</tr>
			{% endfor %}
			</tbody>
		</table>
		{% if fLastPage > 1 %}
		<div class="pagination pagination-small pagination-right">
			<ul>
				<li class="first"><a href="{{ path('LikipeBackendBundle_Post_index', { 'iPage': 1 }) }}">First</a></li>
				<li><a href="{{ path('LikipeBackendBundle_Post_index', { 'iPage': iPreviousPage }) }}">«</a></li>
				{% for iPage in 1..fLastPage %}
					{% if iPage == iCurrentPage %}
						<li class="active"><a href="#">{{ iPage }}</a></li>
					{% else %}
						<li><a href="{{ path('LikipeBackendBundle_Post_index', { 'iPage': iPage }) }}">{{ iPage }}</a></li>
					{% endif %}
				{% endfor %}
				<li><a href="{{ path('LikipeBackendBundle_Post_index', { 'iPage': iNextPage }) }}">»</a></li>
				<li class="last"><a href="{{ path('LikipeBackendBundle_Post_index', { 'iPage': fLastPage }) }}">Last</a></li>
			</ul>
		</div>
		{% endif %}
		<div class="btn-submit-post" style="padding-top: 20px; padding-bottom: 50px;">	
			<a class="btn btn-success" href="{{ path('LikipeBackendBundle_Post_add') }}">{% trans %}Create post{% endtrans %}</a>
		</div>
	</div>
</div> <!-- /container -->
{% endblock %}